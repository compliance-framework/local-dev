# SSH Policy Demo

## Start the demo agents
```shell
make compose-up
```

## Open the UI

[http://localhost:8000](http://localhost:8000)

## Start

There are a number of SSH agents running, and immediately after starting the demo environment, results will start streaming in.

At first, all SSH configurations are insecure to show what non-compliance looks like. The graphs will reflect this as well. 

## Fixing a single SSH host

```shell
# "SSH" into the host with a problem
./hack/local-shared/do exec worker-1 bash

# Install utils for managing the host
apt-get update -y && apt-get install -y vim

# Edit the SSHD configuration and fix some of the issues
vim /etc/ssh/sshd_config.d/sshd.conf

# Restart the ssh service
service ssh restart
```

## Showing updated compliance findings

Open the UI once more at http://localhost:8000/results.

Use the search `type=ssh` to show one machine being in compliance and the charts trending down.

Use the search `_hostname=kube-prod-worker-1 and type=ssh` to quickly locate the specific machine that is in compliance. 
